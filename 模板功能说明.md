# 📧 邮件模板功能说明

## 🎉 功能介绍

邮件模板功能允许您保存常用的邮件主题和内容，避免每次发送邮件时重复输入相同的内容。

## ✨ 核心功能

### 1. 保存模板
- ✅ 保存邮件主题
- ✅ 保存邮件内容
- ✅ 保存HTML模式设置
- ✅ 自动记录创建时间
- ✅ 支持同名模板覆盖

### 2. 应用模板
- ✅ 一键应用已保存的模板
- ✅ 自动填充主题和内容
- ✅ 自动设置HTML模式
- ✅ 高亮显示当前使用的模板

### 3. 管理模板
- ✅ 查看所有已保存的模板
- ✅ 删除不需要的模板
- ✅ 模板持久化存储

## 📋 使用方法

### 保存新模板

1. **编写邮件内容**
   - 进入"编写邮件"步骤（步骤3）
   - 填写邮件主题
   - 填写邮件内容
   - 设置是否使用HTML模式

2. **保存模板**
   - 点击底部的"保存为模板"按钮
   - 在弹窗中输入模板名称（例如：新年祝福）
   - 确认当前内容无误
   - 点击"保存"按钮

3. **保存成功**
   - 系统提示"模板保存成功"
   - 模板自动添加到模板列表
   - 下次可以直接使用

### 应用已有模板

1. **查看模板列表**
   - 进入"编写邮件"步骤
   - 顶部会显示"快速应用模板"提示框
   - 显示所有已保存的模板（标签形式）

2. **应用模板**
   - 点击任意模板标签
   - 系统自动填充：
     - 邮件主题
     - 邮件内容
     - HTML模式设置
   - 当前选中的模板会高亮显示（蓝色）

3. **编辑应用的模板内容**
   - 应用模板后可以继续编辑
   - 修改后不会影响原模板
   - 可以保存为新模板

### 删除模板

1. **删除方式**
   - 在模板标签右侧点击"×"按钮
   - 确认删除对话框中点击"确定"
   - 模板被永久删除

2. **删除提示**
   - 删除前会弹出确认对话框
   - 防止误删除
   - 删除后无法恢复

### 更新已有模板

1. **覆盖保存**
   - 应用某个模板后进行修改
   - 点击"保存为模板"
   - 使用相同的模板名称
   - 系统提示"模板已更新"

2. **保留原模板**
   - 使用不同的模板名称保存
   - 原模板保持不变
   - 创建新的模板副本

## 🎯 使用场景

### 场景1：节日祝福邮件

**保存模板：**
```
模板名称：春节祝福
主题：新春快乐！
内容：
尊敬的{{name}}：

值此新春佳节之际，衷心祝愿您和您的家人：
新年快乐，万事如意！

此致
敬礼

XX公司
2024年
```

**使用时：**
1. 点击"春节祝福"模板
2. 系统自动填充内容
3. 导入收件人列表
4. 直接发送

### 场景2：通知类邮件

**保存模板：**
```
模板名称：会议通知
主题：重要会议通知
内容：
亲爱的{{name}}：

您好！兹定于本周五下午2点召开季度总结会议，请准时参加。

会议地点：会议室A
会议时间：本周五 14:00

HR部门
```

### 场景3：营销推广邮件

**保存模板：**
```
模板名称：产品推广
主题：【限时优惠】新产品上市
内容：
<h2>尊敬的{{name}}：</h2>

<p>我们的新产品正式上市了！</p>

<ul>
  <li>限时折扣：8折优惠</li>
  <li>优惠期限：本周内</li>
  <li>购买链接：www.example.com</li>
</ul>

<p>期待您的光临！</p>
```
（注意：开启HTML模式）

### 场景4：常规通知

**保存多个模板：**
- 面试通知模板
- 录用通知模板
- 培训通知模板
- 活动邀请模板
- 账单提醒模板

## 💡 最佳实践

### 1. 合理命名
- ✅ 使用清晰明确的名称
- ✅ 包含场景或用途
- ✅ 避免过长的名称
- ❌ 不要使用"模板1"、"测试"等模糊名称

**好的命名：**
- 新年祝福
- 会议通知
- 产品推广-季度促销
- 面试邀请

**不好的命名：**
- 模板1
- test
- 111
- 邮件

### 2. 分类管理
建议按用途保存不同类型的模板：
- **节日类**：春节、中秋、新年等
- **通知类**：会议、培训、活动等
- **营销类**：促销、新品、优惠等
- **行政类**：面试、录用、考勤等

### 3. 定期维护
- 定期清理不再使用的模板
- 更新过时的内容
- 保持模板库整洁

### 4. 善用变量
模板中使用变量提高复用性：
- `{{name}}` - 收件人姓名
- `{{email}}` - 收件人邮箱

### 5. HTML模板
对于需要排版的邮件：
- 使用HTML模式
- 添加基本样式
- 测试不同邮件客户端的显示效果

## 🖼️ 界面说明

### 模板标签显示

在"编写邮件"步骤顶部：

```
┌─────────────────────────────────────────────────────┐
│ ℹ️ 快速应用模板                                      │
│                                                      │
│  [📄 新年祝福 ×]  [📄 会议通知 ×]  [📄 产品推广 ×]  │
│                                                      │
└─────────────────────────────────────────────────────┘
```

- 蓝色标签：当前使用的模板
- 灰色标签：其他可用模板
- ×按钮：删除模板

### 保存模板弹窗

```
┌─────────────────────────────────────┐
│  保存邮件模板                  ✕   │
├─────────────────────────────────────┤
│                                     │
│  模板名称 *                         │
│  ┌───────────────────────────────┐ │
│  │ 例如：新年祝福模板            │ │
│  └───────────────────────────────┘ │
│  如果已存在同名模板，将会覆盖       │
│                                     │
│  ℹ️ 提示                            │
│  当前邮件内容将被保存为模板：       │
│  • 主题：新年快乐                   │
│  • 内容长度：150 字符               │
│  • HTML模式：否                     │
│                                     │
├─────────────────────────────────────┤
│              [取消]    [保存]       │
└─────────────────────────────────────┘
```

## ⚙️ 技术实现

### 后端API

#### 1. 获取所有模板
```
GET /api/templates
响应：
{
  "success": true,
  "data": [
    {
      "id": "1696838400.123",
      "name": "新年祝福",
      "subject": "新年快乐",
      "content": "...",
      "html_mode": false,
      "created_at": "2024-10-09 10:00:00"
    }
  ]
}
```

#### 2. 保存模板
```
POST /api/templates
请求体：
{
  "name": "新年祝福",
  "subject": "新年快乐",
  "content": "...",
  "html_mode": false
}
响应：
{
  "success": true,
  "message": "模板保存成功",
  "data": {...}
}
```

#### 3. 删除模板
```
DELETE /api/templates/{template_id}
响应：
{
  "success": true,
  "message": "模板已删除"
}
```

### 数据存储

- **存储位置**：`backend/templates/templates.json`
- **存储格式**：JSON文件
- **持久化**：文件系统存储
- **备份建议**：定期备份templates.json文件

### 数据结构

```json
[
  {
    "id": "时间戳",
    "name": "模板名称",
    "subject": "邮件主题",
    "content": "邮件内容",
    "html_mode": true/false,
    "created_at": "创建时间"
  }
]
```

## 📊 使用统计建议

建议记录以下信息（未来功能）：
- 模板使用次数
- 最后使用时间
- 发送成功率
- 模板效果分析

## 🔒 安全注意

1. **敏感信息**
   - 不要在模板中保存敏感信息
   - 不要保存具体的收件人信息
   - 使用变量代替具体内容

2. **备份建议**
   - 定期备份`backend/templates/templates.json`
   - 重要模板建议额外保存副本

3. **权限控制**
   - 当前版本无权限控制
   - 所有用户共享模板库
   - 未来版本将支持个人模板

## ❓ 常见问题

### Q1: 模板保存后在哪里？
**A:** 保存在`backend/templates/templates.json`文件中。

### Q2: 模板数量有限制吗？
**A:** 当前版本无限制，但建议保持在50个以内以保持界面整洁。

### Q3: 可以导出/导入模板吗？
**A:** 当前版本不支持，可以手动复制`templates.json`文件实现迁移。

### Q4: 删除的模板可以恢复吗？
**A:** 不能。建议删除前确认，重要模板应备份。

### Q5: 模板可以包含附件信息吗？
**A:** 当前版本不支持，仅保存主题和内容。

### Q6: HTML模板在所有邮箱都能正常显示吗？
**A:** 不一定。不同邮件客户端对HTML的支持程度不同，建议使用简单的HTML标签。

### Q7: 可以设置默认模板吗？
**A:** 当前版本不支持，未来版本将添加此功能。

### Q8: 模板会自动同步到其他电脑吗？
**A:** 不会。模板保存在本地服务器，需要手动复制文件实现同步。

## 🚀 快速开始

### 5分钟上手模板功能

1. **创建第一个模板**（1分钟）
   ```
   1. 进入"编写邮件"步骤
   2. 输入：主题"测试模板"，内容"这是测试"
   3. 点击"保存为模板"
   4. 输入模板名称"测试"
   5. 点击"保存"
   ```

2. **使用模板**（30秒）
   ```
   1. 清空当前内容
   2. 点击顶部的"测试"标签
   3. 内容自动填充
   ```

3. **删除模板**（10秒）
   ```
   1. 点击模板标签的"×"
   2. 确认删除
   ```

## 🎓 进阶技巧

### 技巧1：快速切换模板
连续点击不同模板标签即可快速切换，查看不同模板的内容。

### 技巧2：基于模板创建变体
1. 应用基础模板
2. 稍作修改
3. 保存为新名称
4. 创建多个相似模板

### 技巧3：模板版本管理
使用模板名称标注版本：
- 产品推广-v1
- 产品推广-v2
- 产品推广-最新

### 技巧4：季节性模板
为不同季节创建专属模板：
- 春季-促销模板
- 夏季-促销模板
- 年终-总结模板

## 📞 反馈建议

如果您对模板功能有任何建议，欢迎反馈：
- 希望增加的功能
- 使用中遇到的问题
- 改进建议

---

**更新日期**: 2024-10-09  
**功能版本**: v1.1.0  
**文档版本**: 1.0

